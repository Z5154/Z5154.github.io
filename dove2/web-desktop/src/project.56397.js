window.__require=function t(e,i,o){function n(c,r){if(!i[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var l=i[c]={exports:{}};e[c][0].call(l.exports,function(t){return n(e[c][1][t]||t)},l,l.exports,t,e,i,o)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<o.length;c++)n(o[c]);return n}({dialog:[function(t,e,i){"use strict";cc._RF.push(e,"9a278ph+eJOdLtUjvCGdjcQ","dialog");var o={1:{name:"\u52c7\u8005",url:"role/hero"},2:{name:"\u767d\u9aa8",url:"role/npc"}};cc.Class({extends:cc.Component,properties:{picSprite:cc.Sprite,nameLabel:cc.Label,textLabel:cc.Label},onLoad:function(){window.dialog=this.node,cc.systemEvent.on("keydown",this.onkeyDown,this)},onDestroy:function(){cc.systemEvent.off("keydown",this.onkeyDown,this)},onkeyDown:function(t){switch(t.keyCode){case cc.macro.KEY.space:this.nextTextData()}},init:function(t){this.nowText=null,this.textEnd=!0,this.tt=0,this.textIndex=-1,this.textDataArr=t,this.node.active=!0,this.nextTextData()},nextTextData:function(){this.textEnd&&(++this.textIndex<this.textDataArr.length?this.setTextDate(this.textDataArr[this.textIndex]):this.closeDialog())},setTextDate:function(t){var e=this;this.textEnd&&(this.textEnd=!1,this.nameLabel.string=o[t.role].name,this.textLabel.string="",this.nowText=t.content,cc.loader.loadRes(o[t.role].url,cc.SpriteFrame,function(t,i){t&&cc.log(t),e.picSprite.spriteFrame=i}))},closeDialog:function(){this.node.active=!1},start:function(){},update:function(t){this.nowText&&(this.tt+=t,this.tt>=.1&&(this.textLabel.string.length<this.nowText.length?this.textLabel.string=this.nowText.slice(0,this.textLabel.string.length+1):(this.textEnd=!0,this.nowText=null),this.tt=0))}}),cc._RF.pop()},{}],game:[function(t,e,i){"use strict";cc._RF.push(e,"b0f1blOSWRCsYAprTkjd+gu","game"),cc.Class({extends:cc.Component,properties:{TiledMap:cc.TiledMap,dialogNode:cc.Node},onLoad:function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,0)},start:function(){for(var t=this.TiledMap.getTileSize(),e=this.TiledMap.getLayer("wall"),i=e.getLayerSize(),o=0;o<i.width;o++)for(var n=0;n<i.height;n++){var s=e.getTiledTileAt(o,n,!0);if(0!=s.gid){s.node.group="wall",s.node.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var c=s.node.addComponent(cc.PhysicsBoxCollider);c.offset=cc.v2(t.width/2,t.height/2),c.size=t,c.apply()}}this.dialog=this.dialogNode.getComponent("dialog"),this.dialog.init([{role:1,content:"\u5443..."},{role:2,content:"\u4f60\u9192\u5566"},{role:1,content:"...\u8fd9\u662f\u4ec0\u4e48\u5730\u65b9"},{role:2,content:"\u8fd9\u662f\u9e3d\u5b50\u5de5\u4f5c\u5ba4\u7684\u5730\u4e0b\u5ba4\uff0c\u4f60\u521a\u624d\u64ac\u9501\u88ab\u4ed6\u4eec\u6254\u4e0b\u6765\u4e86"},{role:1,content:"...\u4f60\u662f\u4ec0\u4e48\u9b3c?"},{role:2,content:"\u6211\u662f\u9e3d\u5b50\u5de5\u4f5c\u5ba4\u7684\u4e00\u4e2a\u7ec4\u5458\uff0c\u672c\u6765\u60f3\u5728\u622a\u6b62\u65e5\u524d\u5b8c\u6210\u9879\u76ee\uff0c\u4f46\u5374\u56e0\u4e3a\u592a\u809d\u53d8\u6210\u4e86\u4e00\u5806\u767d\u9aa8"},{role:1,content:"..."},{role:2,content:"..."},{role:1,content:"\u8fd9\u4e2a\u5730\u4e0b\u5ba4\u7ed9\u6211\u4e00\u79cd\u4f3c\u66fe\u76f8\u8bc6\u7684\u611f\u89c9...\u51fa\u53e3\u5728\u54ea\u91cc?"},{role:2,content:"\u6ca1\u65f6\u95f4\u505a\uff0c\u4f60\u770b\u8fd9\u91cc\u8fde\u80cc\u666f\u97f3\u4e50\u90fd\u6ca1\u6709"},{role:1,content:"\u5367\u69fd..."},{role:2,content:"\u6b38\u90a3\u662f\u810f\u8bdd\u4e0d\u53ef\u4ee5\u8bb2\u7684..."}])}}),cc._RF.pop()},{}],hero:[function(t,e,i){"use strict";cc._RF.push(e,"54722HZkKhEGZF4ZD9Au6ow","hero");var o={};cc.Class({extends:cc.Component,properties:{speed:200},onLoad:function(){cc.systemEvent.on("keydown",this.onkeydown,this),cc.systemEvent.on("keyup",this.onKeyup,this),this.state="",this.sp=cc.v2(0,0),this.heroAni=this.node.getComponent(cc.Animation)},setState:function(t){this.state!=t&&(this.state=t,this.heroAni.play(this.state))},onkeydown:function(t){o[t.keyCode]=1},onKeyup:function(t){o[t.keyCode]=0},start:function(){},update:function(t){if(!window.dialog||!window.dialog.active){o[cc.macro.KEY.a]||o[cc.macro.KEY.left]?this.sp.x=-1:o[cc.macro.KEY.d]||o[cc.macro.KEY.right]?this.sp.x=1:this.sp.x=0,o[cc.macro.KEY.w]||o[cc.macro.KEY.up]?this.sp.y=1:o[cc.macro.KEY.s]||o[cc.macro.KEY.down]?this.sp.y=-1:this.sp.y=0,this.lv=this.node.getComponent(cc.RigidBody).linearVelocity,this.sp.x?(this.lv.y=0,this.lv.x=this.sp.x*this.speed):this.sp.y?(this.lv.x=0,this.lv.y=this.sp.y*this.speed):this.lv.x=this.lv.y=0,this.node.getComponent(cc.RigidBody).linearVelocity=this.lv;var e="";1==this.sp.x?e="hero_right":-1==this.sp.x?e="hero_left":1==this.sp.y?e="hero_up":-1==this.sp.y&&(e="hero_down"),e&&this.setState(e)}}}),cc._RF.pop()},{}]},{},["dialog","game","hero"]);